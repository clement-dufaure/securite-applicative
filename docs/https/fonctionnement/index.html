<!doctype html><html lang=fr-fr><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=preload as=font href=https://securite-applicative.dufau.re/fonts/vendor/jost/jost-v4-latin-regular.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=https://securite-applicative.dufau.re/fonts/vendor/jost/jost-v4-latin-500.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=https://securite-applicative.dufau.re/fonts/vendor/jost/jost-v4-latin-700.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=https://securite-applicative.dufau.re/fonts/KaTeX_Main-Regular.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=https://securite-applicative.dufau.re/fonts/KaTeX_Math-Italic.woff2 type=font/woff2 crossorigin><script>(()=>{var t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,e=localStorage.getItem("theme");t&&e===null&&(localStorage.setItem("theme","dark"),document.documentElement.setAttribute("data-dark-mode","")),t&&e==="dark"&&document.documentElement.setAttribute("data-dark-mode",""),e==="dark"&&document.documentElement.setAttribute("data-dark-mode","")})()</script><link rel=stylesheet href=https://securite-applicative.dufau.re/main.0fe80c6b892b5b4a23c1976293e62f35444473be7ab2a9d0d6c743d298714e2a8ee5f1852906bd82d55e7a170852cf37ae8d96a46683034d7aea1341500a89b4.css integrity="sha512-D+gMa4krW0ojwZdik+YvNUREc756sqnQ1sdD0phxTiqO5fGFKQa9gtVeehcIUs83ro2WpGaDA0166hNBUAqJtA==" crossorigin=anonymous><noscript><style>img.lazyload{display:none}</style></noscript><meta name=robots content="index, follow"><meta name=googlebot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><meta name=bingbot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><title>Fontionnement de https - Formation sécurité applicative</title><meta name=description content="Les grands principes #  HTTP protocole purement applicatif &amp;ldquo;Web&amp;rdquo; : toutes données échangées sont en clair Protocole SSL ou TLS (le nom dépend de la version) : gestion d&amp;rsquo;un tunnel sécurisé Des protocoles purement fonctionnels (HTTP,FTP,SMTP,&amp;hellip;) peuvent se sécuriser simplement en s&amp;rsquo;échangeant dans un tunnel SSL HTTPS = HTTP + SSL  Proposer HTTPS sur un serveur #  Avoir un listener dédié au HTTPS (sur le port 443 dans une configuration standard) : le HTTPS est &amp;ldquo;implicite&amp;rdquo; Avoir une configuration HTTPS minimale, soit un couple clé privée/clé publique  Echange sécurisé #  Les deux parties, client et serveur, doivent se mettre d&amp;rsquo;accord sur une clé symétrique Il existe des méthode pour communiquer sur un réseau en clair une clé symétrique secrète, qui sera en fait partiellement généré par les deux parties (Algorithme de Diffie-Hellman)  sequenceDiagram participant C as TLS Client participant S as TLS Serveur C-&amp;gt;&amp;gt;S: Client Hello note over C,S: Bonjour, &amp;lt;br/&amp;gt; je supporte les versions de TLS &amp;lt;br/&amp;gt; et les algorithmes suivants : &amp;lt;br/&amp;gt; ."><link rel=canonical href=https://securite-applicative.dufau.re/docs/https/fonctionnement/><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="og:title" content="Fontionnement de https"><meta property="og:description" content="Les grands principes #  HTTP protocole purement applicatif &ldquo;Web&rdquo; : toutes données échangées sont en clair Protocole SSL ou TLS (le nom dépend de la version) : gestion d&rsquo;un tunnel sécurisé Des protocoles purement fonctionnels (HTTP,FTP,SMTP,&mldr;) peuvent se sécuriser simplement en s&rsquo;échangeant dans un tunnel SSL HTTPS = HTTP + SSL  Proposer HTTPS sur un serveur #  Avoir un listener dédié au HTTPS (sur le port 443 dans une configuration standard) : le HTTPS est &ldquo;implicite&rdquo; Avoir une configuration HTTPS minimale, soit un couple clé privée/clé publique  Echange sécurisé #  Les deux parties, client et serveur, doivent se mettre d&rsquo;accord sur une clé symétrique Il existe des méthode pour communiquer sur un réseau en clair une clé symétrique secrète, qui sera en fait partiellement généré par les deux parties (Algorithme de Diffie-Hellman)  sequenceDiagram participant C as TLS Client participant S as TLS Serveur C->>S: Client Hello note over C,S: Bonjour, <br/> je supporte les versions de TLS <br/> et les algorithmes suivants : <br/> ."><meta property="og:url" content="https://securite-applicative.dufau.re/docs/https/fonctionnement/"><meta property="og:site_name" content="Formation sécurité applicative"><meta property="og:image" content="https://securite-applicative.dufau.re/doks.png"><meta property="og:image:alt" content="Formation sécurité applicative"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@getdoks"><meta name=twitter:creator content="@henkverlinde"><meta name=twitter:title content="Fontionnement de https"><meta name=twitter:description content><meta name=twitter:image content="https://securite-applicative.dufau.re/doks.png"><meta name=twitter:image:alt content="Fontionnement de https"><script type=application/ld+json>{"@context":"https://schema.org","@graph":[{"@type":"Organization","@id":"https://securite-applicative.dufau.re/#/schema/organization/1","name":"Doks","url":"https://securite-applicative.dufau.re/","sameAs":["https://twitter.com/getdoks","https://github.com/h-enk/doks"],"logo":{"@type":"ImageObject","@id":"https://securite-applicative.dufau.re/#/schema/image/1","url":"https://securite-applicative.dufau.re/logo-doks.png","width":512,"height":512,"caption":"Doks"},"image":{"@id":"https://securite-applicative.dufau.re/#/schema/image/1"}},{"@type":"WebSite","@id":"https://securite-applicative.dufau.re/#/schema/website/1","url":"https://securite-applicative.dufau.re/","name":"Formation sécurité applicative","description":"Doks is a Hugo theme for building secure, fast, and SEO-ready documentation websites, which you can easily update and customize.","publisher":{"@id":"https://securite-applicative.dufau.re/#/schema/organization/1"}},{"@type":"WebPage","@id":"https://securite-applicative.dufau.re/docs/https/fonctionnement/","url":"https://securite-applicative.dufau.re/docs/https/fonctionnement/","name":"Fontionnement de https","description":"","isPartOf":{"@id":"https://securite-applicative.dufau.re/#/schema/website/1"},"about":{"@id":"https://securite-applicative.dufau.re/#/schema/organization/1"},"datePublished":"0001-01-01T00:00:00CET","dateModified":"0001-01-01T00:00:00CET","breadcrumb":{"@id":"https://securite-applicative.dufau.re/docs/https/fonctionnement/#/schema/breadcrumb/1"},"primaryImageOfPage":{"@id":"https://securite-applicative.dufau.re/docs/https/fonctionnement/#/schema/image/2"},"inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https://securite-applicative.dufau.re/docs/https/fonctionnement/"]}]},{"@type":"BreadcrumbList","@id":"https://securite-applicative.dufau.re/docs/https/fonctionnement/#/schema/breadcrumb/1","name":"Breadcrumbs","itemListElement":[{"@type":"ListItem","position":1,"item":{"@type":"WebPage","@id":"https://securite-applicative.dufau.re/","url":"https://securite-applicative.dufau.re/","name":"Home"}},{"@type":"ListItem","position":2,"item":{"@type":"WebPage","@id":"https://securite-applicative.dufau.re/docs/","url":"https://securite-applicative.dufau.re/docs/","name":"Docs"}},{"@type":"ListItem","position":3,"item":{"@type":"WebPage","@id":"https://securite-applicative.dufau.re/docs/https/","url":"https://securite-applicative.dufau.re/docs/https/","name":"HTTPS"}},{"@type":"ListItem","position":4,"item":{"@id":"https://securite-applicative.dufau.re/docs/https/fonctionnement/"}}]},{"@context":"https://schema.org","@graph":[{"@type":"Article","@id":"https://securite-applicative.dufau.re/#/schema/article/1","headline":"Fontionnement de https","description":"","isPartOf":{"@id":"https://securite-applicative.dufau.re/docs/https/fonctionnement/"},"mainEntityOfPage":{"@id":"https://securite-applicative.dufau.re/docs/https/fonctionnement/"},"datePublished":"0001-01-01T00:00:00CET","dateModified":"0001-01-01T00:00:00CET","author":{"@id":"https://securite-applicative.dufau.re/#/schema/person/2"},"publisher":{"@id":"https://securite-applicative.dufau.re/#/schema/organization/1"},"image":{"@id":"https://securite-applicative.dufau.re/docs/https/fonctionnement/#/schema/image/2"}}]},{"@context":"https://schema.org","@graph":[{"@type":"Person","@id":"https://securite-applicative.dufau.re/#/schema/person/2","name":"Henk Verlinde","sameAs":["https://twitter.com/henkverlinde","https://www.linkedin.com/in/henkverlinde/","https://github.com/h-enk"]}]},{"@context":"https://schema.org","@graph":[{"@type":"ImageObject","@id":"https://securite-applicative.dufau.re/docs/https/fonctionnement/#/schema/image/2","url":"https://securite-applicative.dufau.re/doks.png","contentUrl":"https://securite-applicative.dufau.re/doks.png","caption":"Fontionnement de https"}]}]}</script><meta name=theme-color content="#fff"><link rel=apple-touch-icon sizes=180x180 href=https://securite-applicative.dufau.re/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://securite-applicative.dufau.re/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://securite-applicative.dufau.re/favicon-16x16.png><link rel=manifest crossorigin=use-credentials href=https://securite-applicative.dufau.re/site.webmanifest></head><body class="docs single"><div class=header-bar></div><header class="navbar navbar-expand-md navbar-light doks-navbar"><nav class="container-xxl flex-wrap flex-md-nowrap" aria-label="Main navigation"><a class="navbar-brand p-0 me-auto" href=/ aria-label="Formation sécurité applicative">Formation sécurité applicative</a>
<button class="btn btn-menu d-block d-md-none order-5" type=button data-bs-toggle=offcanvas data-bs-target=#offcanvasDoks aria-controls=offcanvasDoks aria-label="Open main menu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button><div class="offcanvas offcanvas-end border-0 py-md-1" tabindex=-1 id=offcanvasDoks data-bs-backdrop=true aria-labelledby=offcanvasDoksLabel><div class="header-bar d-md-none"></div><div class="offcanvas-header d-md-none"><h2 class="h5 offcanvas-title ps-2" id=offcanvasDoksLabel><a class=text-dark href=/>Formation sécurité applicative</a></h2><button type=button class="btn-close text-reset me-2" data-bs-dismiss=offcanvas aria-label="Close main menu"></button></div><div class="offcanvas-body px-4"><h3 class="h6 text-uppercase mb-3 d-md-none">Main</h3><ul class="nav flex-column flex-md-row ms-md-n3"></ul><hr class="text-black-50 my-4 d-md-none"><h3 class="h6 text-uppercase mb-3 d-md-none">Socials</h3><ul class="nav flex-column flex-md-row ms-md-auto me-md-n5 pe-md-2"><li class=nav-item><a class="nav-link ps-0 py-1" href=https://github.com/clement-dufaure/securite-applicative><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg><small class="ms-2 d-md-none">GitHub</small></a></li></ul></div></div><button id=mode class="btn btn-link order-md-1" type=button aria-label="Toggle user interface mode">
<span class=toggle-dark><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></span><span class=toggle-light><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></span></button></nav></header><nav class="doks-subnavbar py-2 sticky-lg-top" aria-label="Secondary navigation"><div class="container-xxl d-flex align-items-md-center"><form class="doks-search position-relative flex-grow-1 me-auto"><input id=search class="form-control is-search" type=search placeholder="Search docs..." aria-label="Search docs..." autocomplete=off><div id=suggestions class="shadow bg-white rounded d-none"></div></form><button class="btn doks-sidebar-toggle d-lg-none ms-3 order-3 collapsed" type=button data-bs-toggle=collapse data-bs-target=#doks-docs-nav aria-controls=doks-docs-nav aria-expanded=false aria-label="Toggle documentation navigation"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="doks doks-expand" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>Expand</title><polyline points="7 13 12 18 17 13"/><polyline points="7 6 12 11 17 6"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="doks doks-collapse" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>Collapse</title><polyline points="17 11 12 6 7 11"/><polyline points="17 18 12 13 7 18"/></svg></button></div></nav><div class=container-xxl><aside class=doks-sidebar><nav id=doks-docs-nav class="collapse d-lg-none" aria-label="Tertiary navigation"><ul class="list-unstyled collapsible-sidebar"><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-0b79795d3efc95b9976c7c5b933afce2 aria-expanded=false>
Introduction</button><div class=collapse id=section-0b79795d3efc95b9976c7c5b933afce2><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://securite-applicative.dufau.re/docs/intro/grands-principes/>Les grands principes de la sécurité</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-53c7b2c8457704ee6f16cb2e6434b744 aria-expanded=false>
Failles applicatives</button><div class=collapse id=section-53c7b2c8457704ee6f16cb2e6434b744><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://securite-applicative.dufau.re/docs/failles/intro/>Qu'est ce qu'une faille applicative ?</a></li><li><a class="docs-link rounded" href=https://securite-applicative.dufau.re/docs/failles/sql/>Injections de code (serveur)</a></li><li><a class="docs-link rounded" href=https://securite-applicative.dufau.re/docs/failles/injection-client/>Injections de code (client)</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-2badb7fa3e862298a650909d45c5066b aria-expanded=true>
Https</button><div class="collapse show" id=section-2badb7fa3e862298a650909d45c5066b><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded active" href=https://securite-applicative.dufau.re/docs/https/fonctionnement/>Fontionnement de https</a></li><li><a class="docs-link rounded" href=https://securite-applicative.dufau.re/docs/https/pratique/>Mise en pratique de https</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-c48fb18ab9d562b42911cddcdc0c855f aria-expanded=false>
Authentification</button><div class=collapse id=section-c48fb18ab9d562b42911cddcdc0c855f><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://securite-applicative.dufau.re/docs/authentification/principes/>Les grands principes de l'authentification</a></li><li><a class="docs-link rounded" href=https://securite-applicative.dufau.re/docs/authentification/oidc/oidc/>Fonctionnement d'OpenID Connect</a></li><li><a class="docs-link rounded" href=https://securite-applicative.dufau.re/docs/authentification/java/></a></li><li><a class="docs-link rounded" href=https://securite-applicative.dufau.re/docs/authentification/js/></a></li><li><a class="docs-link rounded" href=https://securite-applicative.dufau.re/docs/authentification/oidc/keycloak/></a></li><li><a class="docs-link rounded" href=https://securite-applicative.dufau.re/docs/authentification/oidc/oidc-java/></a></li><li><a class="docs-link rounded" href=https://securite-applicative.dufau.re/docs/authentification/oidc/oidc-js/></a></li><li><a class="docs-link rounded" href=https://securite-applicative.dufau.re/docs/authentification/saml/></a></li><li><a class="docs-link rounded" href=https://securite-applicative.dufau.re/docs/authentification/tomcat/></a></li></ul></div></li></ul></nav></aside></div><div class="wrap container-xxl" role=document><div class=content><div class="row flex-xl-nowrap"><div class="col-lg-5 col-xl-4 docs-sidebar d-none d-lg-block"><nav class=docs-links aria-label="Main navigation"><ul class="list-unstyled collapsible-sidebar"><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-0b79795d3efc95b9976c7c5b933afce2 aria-expanded=false>
Introduction</button><div class=collapse id=section-0b79795d3efc95b9976c7c5b933afce2><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://securite-applicative.dufau.re/docs/intro/grands-principes/>Les grands principes de la sécurité</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-53c7b2c8457704ee6f16cb2e6434b744 aria-expanded=false>
Failles applicatives</button><div class=collapse id=section-53c7b2c8457704ee6f16cb2e6434b744><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://securite-applicative.dufau.re/docs/failles/intro/>Qu'est ce qu'une faille applicative ?</a></li><li><a class="docs-link rounded" href=https://securite-applicative.dufau.re/docs/failles/sql/>Injections de code (serveur)</a></li><li><a class="docs-link rounded" href=https://securite-applicative.dufau.re/docs/failles/injection-client/>Injections de code (client)</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-2badb7fa3e862298a650909d45c5066b aria-expanded=true>
Https</button><div class="collapse show" id=section-2badb7fa3e862298a650909d45c5066b><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded active" href=https://securite-applicative.dufau.re/docs/https/fonctionnement/>Fontionnement de https</a></li><li><a class="docs-link rounded" href=https://securite-applicative.dufau.re/docs/https/pratique/>Mise en pratique de https</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-c48fb18ab9d562b42911cddcdc0c855f aria-expanded=false>
Authentification</button><div class=collapse id=section-c48fb18ab9d562b42911cddcdc0c855f><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://securite-applicative.dufau.re/docs/authentification/principes/>Les grands principes de l'authentification</a></li><li><a class="docs-link rounded" href=https://securite-applicative.dufau.re/docs/authentification/oidc/oidc/>Fonctionnement d'OpenID Connect</a></li><li><a class="docs-link rounded" href=https://securite-applicative.dufau.re/docs/authentification/java/></a></li><li><a class="docs-link rounded" href=https://securite-applicative.dufau.re/docs/authentification/js/></a></li><li><a class="docs-link rounded" href=https://securite-applicative.dufau.re/docs/authentification/oidc/keycloak/></a></li><li><a class="docs-link rounded" href=https://securite-applicative.dufau.re/docs/authentification/oidc/oidc-java/></a></li><li><a class="docs-link rounded" href=https://securite-applicative.dufau.re/docs/authentification/oidc/oidc-js/></a></li><li><a class="docs-link rounded" href=https://securite-applicative.dufau.re/docs/authentification/saml/></a></li><li><a class="docs-link rounded" href=https://securite-applicative.dufau.re/docs/authentification/tomcat/></a></li></ul></div></li></ul></nav></div><nav class="docs-toc d-none d-xl-block col-xl-3" aria-label="Secondary navigation"><div class=page-links><h3>On this page</h3><nav id=TableOfContents><ul><li><a href=#les-grands-principes>Les grands principes</a><ul><li><a href=#proposer-https-sur-un-serveur>Proposer HTTPS sur un serveur</a></li><li><a href=#echange-sécurisé>Echange sécurisé</a></li><li><a href=#controle-didentité-et-autorité-de-confiance>Controle d&rsquo;identité et autorité de confiance</a></li></ul></li><li><a href=#déléguer-https>Déléguer HTTPS</a><ul><li><a href=#répartiteur-de-charge-déchiffrant>Répartiteur de charge déchiffrant</a></li></ul></li><li><a href=#vraiment-forcer-le-https>Vraiment forcer le HTTPS</a></li><li><a href=#le-truststore>Le truststore</a></li><li><a href=#https-sur-une-application-javascript>Https sur une application javascript</a></li></ul></nav></div></nav><main class="docs-content col-lg-11 col-xl-9"><h1>Fontionnement de https</h1><p class=lead></p><nav class=d-xl-none aria-label="Quaternary navigation"><div class=page-links><h3>On this page</h3><nav id=TableOfContents><ul><li><a href=#les-grands-principes>Les grands principes</a><ul><li><a href=#proposer-https-sur-un-serveur>Proposer HTTPS sur un serveur</a></li><li><a href=#echange-sécurisé>Echange sécurisé</a></li><li><a href=#controle-didentité-et-autorité-de-confiance>Controle d&rsquo;identité et autorité de confiance</a></li></ul></li><li><a href=#déléguer-https>Déléguer HTTPS</a><ul><li><a href=#répartiteur-de-charge-déchiffrant>Répartiteur de charge déchiffrant</a></li></ul></li><li><a href=#vraiment-forcer-le-https>Vraiment forcer le HTTPS</a></li><li><a href=#le-truststore>Le truststore</a></li><li><a href=#https-sur-une-application-javascript>Https sur une application javascript</a></li></ul></nav></div></nav><h2 id=les-grands-principes>Les grands principes <a href=#les-grands-principes class=anchor aria-hidden=true>#</a></h2><ul><li>HTTP protocole purement applicatif &ldquo;Web&rdquo; : toutes données échangées sont en clair</li><li>Protocole SSL ou TLS (le nom dépend de la version) : gestion d&rsquo;un tunnel sécurisé</li><li>Des protocoles purement fonctionnels (HTTP,FTP,SMTP,&mldr;) peuvent se sécuriser simplement en s&rsquo;échangeant dans un tunnel SSL</li><li>HTTPS = HTTP + SSL</li></ul><h3 id=proposer-https-sur-un-serveur>Proposer HTTPS sur un serveur <a href=#proposer-https-sur-un-serveur class=anchor aria-hidden=true>#</a></h3><ul><li>Avoir un listener dédié au HTTPS (sur le port 443 dans une configuration standard) : le HTTPS est &ldquo;implicite&rdquo;</li><li>Avoir une configuration HTTPS minimale, soit un couple clé privée/clé publique</li></ul><h3 id=echange-sécurisé>Echange sécurisé <a href=#echange-s%c3%a9curis%c3%a9 class=anchor aria-hidden=true>#</a></h3><ul><li>Les deux parties, client et serveur, doivent se mettre d&rsquo;accord sur une clé symétrique</li><li>Il existe des méthode pour communiquer sur un réseau en clair une clé symétrique secrète, qui sera en fait partiellement généré par les deux parties (<a href=https://fr.wikipedia.org/wiki/%C3%89change_de_cl%C3%A9s_Diffie-Hellman>Algorithme de Diffie-Hellman</a>)</li></ul><div class="mermaid bg-white text-center">sequenceDiagram
participant C as TLS Client
participant S as TLS Serveur
C->>S: Client Hello
note over C,S: Bonjour, &lt;br/> je supporte les versions de TLS &lt;br/> et les algorithmes suivants : &lt;br/> ..........
S->>C: Server Hello
note over C,S: Bonjour, &lt;br/> parmi les versions et algorithme que je supporte, &lt;br/> nous allons utiliser TLS 1.2 et cet algorithme : &lt;br/> TLS_DHE_RSA_WITH_AES_256_CBC_SHA
note over C,S: Voici mon certificat : .......
opt
note over C,S: J'aurai besoin d'un certificat à ton nom &lt;br/> pour t'authentifier
end
C->>C: Controle du certificat
note over C: Nom valide ? &lt;br/> Date valide ? &lt;br/> AC reconnue ?
C->>S: Préparation clé (Diffie-Hellman)
note over C,S: chiffrée avec clé publique serveur
S->>S: Déchiffrement avec clé privée
note over S: Fait office de challenge response
opt
S->>S: Controle Certif client le cas échéant
S->>C: Challenge
C->>S: Challenge response
end
S->>C: Finalisation Diffie-Hellman
note over C,S: Le client et le serveur &lt;br/> se sont partagé une clé symétrique &lt;br/> à usage unique à cette communication
C->>S: OK, next encrypted
S->>C: OK, next encrypted
loop
C->>S: encrypted {get /resource/}
S->>C: encrypted {reponse HTTP}
end</div><p>La clé symétrique est jetable, non stockée en dehors de cette échange, elle ne peut donc pas être compromise par la suite.
On parle de confidentialité persistente ou PFS (Perfect Forward Secrecy)</p><h3 id=controle-didentité-et-autorité-de-confiance>Controle d&rsquo;identité et autorité de confiance <a href=#controle-didentit%c3%a9-et-autorit%c3%a9-de-confiance class=anchor aria-hidden=true>#</a></h3><ul><li>A quoi sert la clé asymétrique alors ?</li><li>Problème du &ldquo;Man in the middle&rdquo;<ul><li>&ldquo;Information invisible par un tiers&rdquo;&mldr;</li><li>Encore faut il maîtriser les deux parties</li><li>Le client doit savoir qui il est en train de contacter</li><li>Le serveur propose un certificat contenant principalement</li><li>son nom : l&rsquo;url que l&rsquo;utilisateur a demandé</li><li>sa clé publique</li><li>la signature de ces informations par une autorité de confiance</li></ul></li></ul><p><strong>L&rsquo;autorité de confiance ?</strong></p><ul><li>C&rsquo;est un organisme qui signe avec sa clé privée les informations du serveur</li><li>On peut donc vérifier avec la clé publique de l&rsquo;AC si informations et signature correspondent</li><li>Pour récupérer la clé publique de l&rsquo;Autorité de confiance, on consulte son&mldr;</li><li>Certificat ! &mldr; Mais comment vérifier son certificat ?</li><li>Le certificat d&rsquo;une AC est autosignée, le navigateur est configuré pour accepter un certain nombre</li><li>L&rsquo;insee est une AC reconnue en interne uniquement</li><li>Les applis Internet sont signées par une AC externe reconnue dans le monde entier (intégrée sur les navigateurs connus)</li></ul><h2 id=déléguer-https>Déléguer HTTPS <a href=#d%c3%a9l%c3%a9guer-https class=anchor aria-hidden=true>#</a></h2><ul><li><p>L&rsquo;application ne gère pas le HTTPS, c&rsquo;est le serveur applicatif (tomcat) ou un équipement réseau supérieur qui en a la charge</p></li><li><p>L&rsquo;application peut imposer l&rsquo;utilisation du HTTPS</p></li><li><p>Dans tous les cas c&rsquo;est le serveur applicatif (tomcat) qui a la charge de déterminer si la connexion entrante est sécurisée</p></li><li><p>Cas direct : c&rsquo;est tomcat qui gère lui même la connexion ssl</p></li><li><p>Cas indirect : tomcat ne gère pas de connexion HTTPS mais il sait que la connexion initiale est en HTTPS (cas d&rsquo;un reverse proxy)</p></li><li><p>Si le connecteur gère la connexion ssl ou qu&rsquo;il est dédié à recevoir des connexions sécurisées, on peut directement le spécifier sécurisé.</p></li><li><p>Sinon, il va falloir définir un profil de requêtes sécurisées</p></li></ul><h3 id=répartiteur-de-charge-déchiffrant>Répartiteur de charge déchiffrant <a href=#r%c3%a9partiteur-de-charge-d%c3%a9chiffrant class=anchor aria-hidden=true>#</a></h3><ul><li>Architecture Load Balancer qui porte les certificats (et donc gère la connexion HTTPS)</li><li>Le load balancer déchiffre et transmet une requête HTTP (en clair) au serveur applicatif portant l&rsquo;application</li></ul><p><strong>Transfert de l&rsquo;information HTTPS</strong></p><ul><li><p>Pour savoir que la requête initiale est en HTTPS, le load balancer ajoute un entête &ldquo;X-Forwarded-Proto: https&rdquo;</p></li><li><p>On va ensuite configurer notre serveur applicatif (tomcat) pour que la lecture de cet entête signifie &ldquo;La connexion initiale était sécurisé&rdquo;</p></li></ul><pre><code class=language-xml>&lt;Valve className=&quot;org.apache.catalina.connector.RemoteIpValve&quot; protocolHeader=&quot;X-Forwarded-Proto&quot; /&gt;
</code></pre><blockquote><p>Une valve Tomcat est une classe exécutée (invoke()) à l&rsquo;arrivée de chaque requête. C&rsquo;est le même fonctionnement que les filtre JavaEE/JakartaEE</p></blockquote><h2 id=vraiment-forcer-le-https>Vraiment forcer le HTTPS <a href=#vraiment-forcer-le-https class=anchor aria-hidden=true>#</a></h2><ul><li>Niveau applicatif pour controle éventuellement</li><li>Niveau Frontal (Load Balancer) : écouter en http sur le port 80 mais uniquement pour rediriger vers https</li><li><strong>Déclaratif</strong> Indiquer au navigateur de ne plsu utiliser que HTTPS : en-tête HSTS</li></ul><pre><code>Strict-Transport-Security &quot;max-age=31536000&quot;
</code></pre><p>La configuration ne sera activée par le navigateur que s&rsquo;il y a eu une première fois une commication sécurisée correctement !
=> Validation ok du certificat</p><h2 id=le-truststore>Le truststore <a href=#le-truststore class=anchor aria-hidden=true>#</a></h2><p>On va spécifier un peu plus l&rsquo;étape &ldquo;Vérification du certificat serveur&rdquo;</p><ul><li><p>Mon application doit se connecter à une autre application (web-service)</p></li><li><p>Je souhaite que cet appel soit en https (au fond justifié que si la connexion entre les deux serveurs passent par Internet)</p></li><li><p>Lors d&rsquo;une connexion HTTPS, Java vérifie si le certificat distant est valide</p></li><li><p>C&rsquo;est ce que fait le navigateur quand on se connecte à un site</p></li><li><p>Si le certificat n&rsquo;est pas valide (expiré, non associé au domaine, non signé par une autorité de confiance), le navigateur me le signale et je choisit de prendre le risque ou non de me connecter au site.</p></li><li><p>Dans l&rsquo;appli, Java refusera systématiquement la connexion</p></li><li><p>Date d&rsquo;expiration, mauvais nom : je ne peux rien faire, il faut que le certificat soit cohérent</p></li><li><p>Autosigné ? Je peux dire à Java que le signataire du certificat est valide, en d&rsquo;autres termes, je lui définis une autorité de confiance</p></li><li><p>(Il existe la possibilité de créer une classe faisant que Java ne fait plus aucun contrôle sur le certificat mais c&rsquo;est mal)</p></li><li><p>Il faut créer un truststore contenant l&rsquo;ensemble des certificats à valider (= ce que l&rsquo;on considère AC)</p></li></ul><h2 id=https-sur-une-application-javascript>Https sur une application javascript <a href=#https-sur-une-application-javascript class=anchor aria-hidden=true>#</a></h2><ul><li>On peut toujours déléguer le https à un équipement frontal réseau</li><li>A noter que l&rsquo;échange sécurisé permet donc ici de garantir l&rsquo;échange correcte du <strong>code source</strong>, il est donc indispensable que l&rsquo;utilisateur soit redirigé au plus tôt vers https</li></ul><p>On peut éventuellement forcer le https au sein de l&rsquo;application, même si c&rsquo;est un peu tard&mldr;</p><ul><li>L&rsquo;application s&rsquo;éxécute chez le client, pour forcer le https, il faut donc raisonner côté client</li><li>Si l&rsquo;application JS veut s&rsquo;assurer de passer en HTTPS, elle doit vérifier le window.location du client et éventuellement le rediriger.</li></ul><pre><code class=language-js>if (
   typeof window !== 'undefined' &amp;&amp;
   window.location &amp;&amp;
   window.location.protocol === 'http:'
 ) {
   window.location.href = window.location.href.replace(
     /^http(?!s)/,
     'https'
   );
 }
</code></pre><p><a href=https://facebook.github.io/create-react-app/docs/using-https-in-development>Pour lancer une application &ldquo;create-react-app&rdquo; en https en local (par defaut http)</a> :</p><ul><li>Au lieu de <code>npm start</code></li><li>Lancer <code>set HTTPS=true&&npm start</code></li></ul><p><em>Https sur les application javascript : cas du back-end mal signé</em>
Un front-end JavaScript effectue des appels à son backend.</p><p>Dans la pratique, c&rsquo;est le navigateur qui effectue ces requetes, et si le certificat du backend ne convient pas au navigateur, la requete va être rejetée.</p><ul><li>Solution 1 : Faire en sort que le backend ait un certificat signé par l&rsquo;Insee</li><li>Solution 2 : se connecter manuellement une fois au backend, accepter l&rsquo;alerte de sécurité du navigateur</li></ul><div class="page-footer-meta d-flex flex-column flex-md-row justify-content-between"></div><div class="docs-navigation d-flex justify-content-between"><a href=/docs/failles/injection-client/><div class="card my-1"><div class="card-body py-2">&larr; Injections de code (client)</div></div></a><a class=ms-auto href=/docs/https/pratique/><div class="card my-1"><div class="card-body py-2">Mise en pratique de https &rarr;</div></div></a></div></main></div></div></div><footer class="footer text-muted"><div class=container-xxl><div class=row><div class="col-lg-8 order-last order-lg-first"><ul class=list-inline><li class=list-inline-item>Powered by Github-pages, <a class=text-muted href=https://gohugo.io/>Hugo</a>, and <a class=text-muted href=https://getdoks.org/>Doks</a></li></ul></div><div class="col-lg-8 order-first order-lg-last text-lg-end"><ul class=list-inline></ul></div></div></div></footer><script src=/js/bootstrap.min.f93d87ed312fd94eae9a720e5988a3bd322bcdd099518866fc5668e18610cca0077fc356b3edfc727dedf5f773dab0a6d87a870e4b616595e76381163dd5a730.js integrity="sha512-+T2H7TEv2U6umnIOWYijvTIrzdCZUYhm/FZo4YYQzKAHf8NWs+38cn3t9fdz2rCm2HqHDkthZZXnY4EWPdWnMA==" crossorigin=anonymous defer></script>
<script src=/js/highlight.min.537e57b5cd767e9b03563e3c2d8db2bb71516fb92afdadec7dbadb99c3a2710479044278bfeaa670bf89dd37224ed7e73d319d5e7819b6293907ddabd61bfd77.js integrity="sha512-U35Xtc12fpsDVj48LY2yu3FRb7kq/a3sfbrbmcOicQR5BEJ4v+qmcL+J3TciTtfnPTGdXngZtik5B92r1hv9dw==" crossorigin=anonymous defer></script>
<script src=/js/vendor/katex/dist/katex.min.93253b59f879e8b8bf4ef8eec49737249299a1cc8b9c25eb1b0c94ae722f3bc470677d56dfdfcc838ccc904ee3ebcc46a5336495f3b1d7fdbb182f3e6b952390.js integrity="sha512-kyU7Wfh56Li/TvjuxJc3JJKZocyLnCXrGwyUrnIvO8RwZ31W39/Mg4zMkE7j68xGpTNklfOx1/27GC8+a5UjkA==" crossorigin=anonymous defer></script>
<script src=/js/vendor/katex/dist/contrib/auto-render.min.b688a23169501c711300d4bdb5ae40c52ee8976f722fbf3871eb709a51db2ea5d7bf51eaef0e82af7542d973d2f681d9c46b70b72d902601642a15af9b9ce80d.js integrity="sha512-toiiMWlQHHETANS9ta5AxS7ol29yL784cetwmlHbLqXXv1Hq7w6Cr3VC2XPS9oHZxGtwty2QJgFkKhWvm5zoDQ==" crossorigin=anonymous defer></script>
<script src=/main.min.b8e7e565bd2186f67f57d2c5d9680f67abbb2a977ff20ad27eb51f5a7b9071fdec7b71a5e964a41a38fb59cb12d43b76e0b3ac8247cb7063bb73efc06a9ac529.js integrity="sha512-uOflZb0hhvZ/V9LF2WgPZ6u7Kpd/8grSfrUfWnuQcf3se3Gl6WSkGjj7WcsS1Dt24LOsgkfLcGO7c+/AaprFKQ==" crossorigin=anonymous defer></script>
<script src=/js/mermaid.min.83b8594750563833e1c00aeeca8f704e65d284daca1c66a503f2496362f4b45477d8cc7a064d9ec4521e5e737513884abea18acc41236f47f88a05c8eba8d239.js integrity="sha512-g7hZR1BWODPhwAruyo9wTmXShNrKHGalA/JJY2L0tFR32Mx6Bk2exFIeXnN1E4hKvqGKzEEjb0f4igXI66jSOQ==" crossorigin=anonymous defer></script>
<script src=https://securite-applicative.dufau.re/index.min.0f0b3f3f83453efa1b4b919b620b2d44e095242263bcc9a23102a09f1c0f02caa5b5a8abc2f58245e05ffb26c0dd7e5c48691609cc182d5ae59129ba6b9b6a95.js integrity="sha512-Dws/P4NFPvobS5GbYgstROCVJCJjvMmiMQKgnxwPAsqltairwvWCReBf+ybA3X5cSGkWCcwYLVrlkSm6a5tqlQ==" crossorigin=anonymous defer></script></body></html>